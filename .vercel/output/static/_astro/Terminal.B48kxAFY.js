import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.Dy6lLLXr.js";/* empty css                       */const m={"/":"Home","/about":"About","/projects":"Projects","/blog":"Blog","/contact":"Contact"};let a=[];const x=50;let h=0,p=[],f={};const C=e=>{if(e&&e.trim()&&(a.length===0||a[a.length-1]!==e)){a.push(e),a.length>x&&(a=a.slice(a.length-x));try{localStorage.setItem("terminalCommandHistory",JSON.stringify(a))}catch(t){console.error("Error saving command history to localStorage",t)}}},v=()=>{if(a.length===0)try{const e=localStorage.getItem("terminalCommandHistory");e&&(a=JSON.parse(e))}catch(e){console.error("Error loading command history from localStorage",e)}return a},P=e=>{const o=e.trim().toLowerCase().split(" "),s=o[0];switch(s){case"help":return E();case"ls":return o[1]==="blog"?I():T();case"cd":return H(o[1]);case"cat":return D(o[1]);case"pwd":return L();case"whoami":return"guest";case"date":return new Date().toString();case"echo":return o.slice(1).join(" ");case"theme":return O();case"open":return k(o[1]);case"blog":return`Navigating to blog...
`+A("/blog");case"view-post":return S(o[1]);case"search-blog":return B(o.slice(1).join(" "));case"history":return q();case"back":return z();case"forward":return R();case"":return"";default:return`Command not found: ${s}. Type 'help' for available commands.`}},E=()=>`
Available commands:
  help                     Show this help message
  ls                       List available pages
  ls blog                  List all blog posts
  cd [page]                Navigate to a page
  cat [page]               View page content
  pwd                      Show current page path
  whoami                   Display current user
  date                     Show current date/time
  echo [text]              Display text
  theme                    Show theme information
  open [page]              Open a page in the main content area
  blog                     Navigate to the blog
  view-post [id]           View a specific blog post by ID
  search-blog [query]      Search blog posts by keyword
  history                  Show command history
  back                     Go back in browser history
  forward                  Go forward in browser history
  
Navigation tips:
  - Use UP/DOWN arrow keys to navigate through command history
  - Press TAB for command auto-completion (coming soon)
`,T=()=>Object.entries(m).map(([e,t])=>`${e} - ${t}`).join(`
`),H=e=>{if(!e)return"Please specify a path. Example: cd /about";if(e.match(/^\/blog\/[a-z0-9-]+$/)){const o=e.split("/").pop();return S(o)}const t=e.startsWith("/")?e:`/${e}`;return m[t]?(h=window.history.length,window.location.href=t,`Navigating to ${m[t]}...`):`Directory not found: ${e}`},k=e=>{if(!e)return"Please specify a path. Example: open /about";const t=e.startsWith("/")?e:`/${e}`;return m[t]?(fetch(t).then(o=>o.text()).then(o=>{const w=new DOMParser().parseFromString(o,"text/html").querySelector("main").innerHTML;document.querySelector("main").innerHTML=w,window.history.pushState({},m[t],t),h=window.history.length}),`Opening ${m[t]} in main content area...`):`Page not found: ${e}`},D=e=>{if(!e)return"Please specify a path. Example: cat /about";if(e.match(/^\/blog\/[a-z0-9-]+$/)){const o=e.split("/").pop();return`Viewing blog post: ${o}
Use 'view-post ${o}' to open the full post.`}const t=e.startsWith("/")?e:`/${e}`;return m[t]?`Viewing content for ${m[t]} (preview):
-----
This is a preview of the ${m[t]} page content.
Use 'cd ${t}' to navigate to the full page.
-----`:`File not found: ${e}`},L=()=>window.location.pathname,O=()=>`Current theme: Catppuccin Mocha
A soothing pastel theme for the high-spirited!`,A=e=>(h=window.history.length,window.location.href=e,`Navigating to ${e}...`),S=e=>e?(Object.keys(f).length===0&&$(),h=window.history.length,f[e]?(window.location.href=`/blog/${f[e]}`,`Opening blog post: ${e}...`):(window.location.href=`/blog/${e}`,`Opening blog post: ${e}...`)):"Please specify a post ID. Example: view-post my-first-post",$=()=>{try{const e=document.querySelectorAll(".blog-card");e.length>0&&(p=[],f={},e.forEach(t=>{const s=t.querySelector(".post-id").textContent.replace("ID: ",""),d=t.querySelector(".post-title a").textContent,w=t.querySelector(".post-date").textContent,u=t.querySelector(".post-title a").getAttribute("href").replace("/blog/","");p.push({id:s,title:d,date:w,slug:u}),s!==u&&(f[s]=u)}))}catch(e){console.error("Error caching blog posts data",e)}},I=()=>{try{return p.length===0&&($(),p.length===0)?'Blog posts could not be loaded. Navigate to the blog with "cd /blog" first.':p.map(e=>`[${e.id}] ${e.title} - ${e.date}`).join(`
`)}catch{return'Error loading blog posts. Try "cd /blog" to see all posts.'}},B=e=>e?(h=window.history.length,window.location.href=`/blog?search=${encodeURIComponent(e)}`,`Searching blog for "${e}"...`):"Please provide a search term. Example: search-blog javascript",q=()=>{const e=v();return e.length===0?"No command history available.":e.map((t,o)=>`${(o+1).toString().padStart(3," ")}  ${t}`).join(`
`)},z=()=>window.history.length>1&&window.history.length>h?(window.history.back(),"Navigating back..."):"No previous page in history.",R=()=>h<window.history.length-1?(window.history.forward(),"Navigating forward..."):"No next page in history.",F=()=>{const[e,t]=c.useState([]),[o,s]=c.useState(""),[d,w]=c.useState("guest@terminal:~$ "),[g,u]=c.useState(-1),b=c.useRef(null),y=c.useRef(null);c.useEffect(()=>{const n=v();t(n)},[]),c.useEffect(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[e]),c.useEffect(()=>{const n=()=>{document.querySelector(".terminal-container").classList.contains("terminal-open")&&b.current?.focus()};return window.addEventListener("click",n),document.addEventListener("keydown",i=>{i.ctrlKey&&i.key==="`"&&setTimeout(n,100)}),()=>{window.removeEventListener("click",n)}},[]);const N=n=>{const i=v();if(n.key==="Enter"){if(n.preventDefault(),o.trim()==="")t(l=>[...l,{type:"command",text:d+o}]);else{const l=P(o);t(j=>[...j,{type:"command",text:d+o},{type:"output",text:l}]),C(o)}u(-1),s("")}else if(n.key==="ArrowUp"){if(n.preventDefault(),i.length>0){const l=g<i.length-1?g+1:g;u(l),s(i[i.length-1-l]||"")}}else if(n.key==="ArrowDown")if(n.preventDefault(),g>0){const l=g-1;u(l),s(i[i.length-1-l]||"")}else g===0&&(u(-1),s(""));else n.key==="Tab"&&n.preventDefault()};return r.jsxs("div",{className:"terminal-container terminal-open",onClick:()=>b.current?.focus(),children:[r.jsxs("div",{className:"terminal-header",children:[r.jsx("div",{className:"terminal-title",children:"Terminal"}),r.jsxs("div",{className:"terminal-controls",children:[r.jsx("span",{className:"terminal-minimize"}),r.jsx("span",{className:"terminal-maximize"}),r.jsx("span",{className:"terminal-close"})]})]}),r.jsxs("div",{className:"terminal-body",ref:y,children:[r.jsx("div",{className:"terminal-welcome",children:"Welcome to a terminal@pnbe! Type 'help' for available commands. You can navigate the entire site using this terminal (or at least that's the idea)."}),e.length>0&&r.jsx("div",{className:"terminal-history",children:e.map((n,i)=>r.jsx("div",{className:`terminal-line ${n.type==="output"?"terminal-output":""}`,children:n.text},i))}),r.jsxs("div",{className:"terminal-input-line",children:[r.jsx("span",{className:"terminal-prompt",children:d}),r.jsx("input",{ref:b,type:"text",className:"terminal-input",value:o,onChange:n=>s(n.target.value),onKeyDown:N})]})]})]})};export{F as default};
